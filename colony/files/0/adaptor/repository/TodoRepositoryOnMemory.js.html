<h1>TodoRepositoryOnMemory.js</h1>
<pre><code class="lang-js"><span class="comment">/// &lt;reference path="../../../../node_modules/@types/node/index.d.ts" /></span>
<span class="string">"use strict"</span>;
<span class="keyword">var</span> __extends = (<span class="keyword">this</span> &amp;&amp; <span class="keyword">this</span>.__extends) || <span class="function"><span class="keyword">function</span> <span class="params">(d, b)</span> {</span>
    <span class="keyword">for</span> (<span class="keyword">var</span> p <span class="keyword">in</span> b) <span class="keyword">if</span> (b.hasOwnProperty(p)) d[p] = b[p];
    <span class="function"><span class="keyword">function</span> <span class="title">__</span><span class="params">()</span> {</span> <span class="keyword">this</span>.constructor = d; }
    d.prototype = b === <span class="literal">null</span> ? Object.create(b) : (__.prototype = b.prototype, <span class="keyword">new</span> __());
};
<span class="keyword">var</span> I = require(<span class="string">"immutable"</span>);
<span class="keyword">var</span> events_1 = require(<span class="string">"events"</span>);
<span class="keyword">var</span> CHANGEEVENT = <span class="string">"CHANEG"</span>;
<span class="keyword">var</span> TodoRepositoryOnMemory = (<span class="function"><span class="keyword">function</span> <span class="params">(_super)</span> {</span>
    __extends(TodoRepositoryOnMemory, _super);
    <span class="function"><span class="keyword">function</span> <span class="title">TodoRepositoryOnMemory</span><span class="params">()</span> {</span>
        _super.apply(<span class="keyword">this</span>, arguments);
    }
    TodoRepositoryOnMemory.prototype.findById = <span class="function"><span class="keyword">function</span> <span class="params">(id)</span> {</span>
        <span class="keyword">return</span> <span class="keyword">new</span> Promise(<span class="function"><span class="keyword">function</span> <span class="params">(resolve, reject)</span> {</span>
            resolve(TodoRepositoryOnMemory.list.get(id));
        });
    };
    TodoRepositoryOnMemory.prototype.findAll = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">return</span> <span class="keyword">new</span> Promise(<span class="function"><span class="keyword">function</span> <span class="params">(resolve)</span> {</span> <span class="keyword">return</span> resolve(TodoRepositoryOnMemory.list); });
    };
    TodoRepositoryOnMemory.prototype.store = <span class="function"><span class="keyword">function</span> <span class="params">(todo)</span> {</span>
        TodoRepositoryOnMemory.list = TodoRepositoryOnMemory.list.push(todo);
        <span class="keyword">this</span>.emitChange();
        <span class="keyword">return</span> <span class="keyword">new</span> Promise(<span class="function"><span class="keyword">function</span> <span class="params">(resolve)</span> {</span> <span class="keyword">return</span> resolve(); });
    };
    TodoRepositoryOnMemory.prototype.onSub = <span class="function"><span class="keyword">function</span> <span class="params">(fn)</span> {</span>
        <span class="keyword">this</span>.addListener(CHANGEEVENT, fn);
    };
    TodoRepositoryOnMemory.prototype.removeSub = <span class="function"><span class="keyword">function</span> <span class="params">(fn)</span> {</span>
        <span class="keyword">this</span>.removeListener(CHANGEEVENT, fn);
    };
    TodoRepositoryOnMemory.prototype.emitChange = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">this</span>.emit(CHANGEEVENT);
    };
    TodoRepositoryOnMemory.list = I.List();
    <span class="keyword">return</span> TodoRepositoryOnMemory;
}(events_1.EventEmitter));
Object.defineProperty(exports, <span class="string">"__esModule"</span>, { value: <span class="literal">true</span> });
exports.<span class="keyword">default</span> = TodoRepositoryOnMemory;
exports.todoRepository = <span class="keyword">new</span> TodoRepositoryOnMemory;
</code></pre>